/* ========================================================== */
/* --- 1. CONFIGURAÇÕES BÁSICAS E ESTRUTURA GERAL --- */
/* ========================================================== */

/* Importação da Fonte e Reset Básico */
body {
    font-family: 'Roboto', sans-serif;
    margin: 0;
    padding: 0;
    background-color: #f4f7f6;
    color: #333;
}

/* Cabeçalho Principal */
header {
    background-color: #007bff;
    color: white;
    padding: 20px;
    text-align: center;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
}

/* Container Principal */
main {
    max-width: 1200px;
    margin: 30px auto;
    padding: 20px;
}

/* Controles de Navegação */
.calendar-controls {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 20px;
    background-color: white;
    padding: 15px;
    border-radius: 8px;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
}

.calendar-controls button {
    background-color: #28a745;
    color: white;
    border: none;
    padding: 10px 15px;
    border-radius: 5px;
    cursor: pointer;
    transition: background-color 0.3s;
}

.calendar-controls button:hover {
    background-color: #218838;
}

/* ========================================================== */
/* --- 2. LAYOUT E ESTILO DOS DIAS DO CALENDÁRIO --- */
/* ========================================================== */

/* Estrutura do Calendário (Grid) */
.weekdays, .days-grid {
    display: grid;
    grid-template-columns: repeat(7, 1fr);
    text-align: center;
}

.weekdays span {
    background-color: #e9ecef;
    padding: 10px 5px;
    font-weight: 700;
    border: 1px solid #ddd;
}

.days-grid {
    border: 1px solid #ddd;
    border-top: none;
}

/* Estilo Básico do Dia - ATENÇÃO: text-align: center para centralizar o conteúdo! */
.day {
    min-height: 100px;
    padding: 10px;
    border: 1px solid #ddd;
    border-top: none;
    cursor: pointer;
    text-align: center; /* Centraliza o conteúdo horizontalmente */
    background-color: #fff;
    transition: background-color 0.2s;
}

.day:hover:not(.empty) {
    background-color: #f0f0f0;
}

.day-number {
    font-weight: 700;
    font-size: 1.2em;
    margin-bottom: 5px;
    color: #007bff;
    display: block; /* Garante que o número ocupe toda a largura */
}

.empty {
    background-color: #f8f8f8;
    cursor: default;
    border: none;
}

/* Estilo para Dias com Atividade */
.has-activity {
    /* Apenas marcador */
}

/* Indicador de Atividade - ATENÇÃO: display: block e margin: auto para centralizar! */
.activity-indicator {
    background-color: #ffc107;
    color: #333;
    font-size: 0.8em;
    padding: 3px 5px;
    border-radius: 3px;
    
    display: block; /* Ocupa a própria linha */
    width: fit-content; /* Ocupa apenas o espaço do texto */
    margin: 2px auto 0 auto; /* Centraliza horizontalmente (auto) e dá margem superior */
}


/* ========================================================== */
/* --- 3. ESTILOS DE PRIORIDADE (FREEZING) E GERAIS NO CALENDÁRIO --- */
/* ========================================================== */

/* 3.1. HIGH PRIORITY (FERIADO / FREEZING COMERCIAL) */
.day.holiday {
    color: #fec0fe; 
    font-weight: bold;
    background-color: #ffebeb; 
    border-left: 5px solid #fec0fe; 
}

.day.holiday:hover:not(.empty) {
    background-color: #ffcccc;
}

.day.holiday .day-number {
    color: red; 
}


/* 3.2. FREEZING TBRA RELEASE / NGIN (AZUL) */
.day.freezing-tbra-release-ngin {
    background-color: #c9e6f3; 
    border-left: 5px solid #0099cc; 
}
.day.freezing-tbra-release-ngin .day-number {
    color: #0077aa; 
}
.day.freezing-tbra-release-ngin:hover:not(.empty) {
    background-color: #a0d8f0;
}

/* 3.3. FREEZING TBRA GERAL (Laranja) */
.day.freezing-tbra {
    background-color: #ffcc99; 
    border-left: 5px solid orange; 
}
.day.freezing-tbra .day-number {
    color: #E26B0A; 
}
.day.freezing-tbra:hover:not(.empty) {
    background-color: #ffb366;
}

/* 3.4. FREEZING B2B e HUAWEI (Cinza) */
.day.freezing-b2b-huawei {
    background-color: #e6e6e6; 
    border-left: 5px solid #BFBFBF; 
}

.day.freezing-b2b-huawei .day-number {
    color: #7f7f7f; 
}

.day.freezing-b2b-huawei:hover:not(.empty) {
    background-color: #cccccc;
}

/* 3.5. ATIVIDADES GERAIS (Cor Suave) */
.day.general-activity {
    background-color: #d4edda; 
    border-left: 5px solid #155724; 
}

.day.general-activity .day-number {
    color: #155724; 
}

.day.general-activity:hover:not(.empty) {
    background-color: #c3e6cb;
}


/* ========================================================== */
/* --- 4. MODAL E ITENS DE ATIVIDADE --- */
/* ========================================================== */

.modal {
    display: none; 
    position: fixed;
    z-index: 1;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    overflow: auto;
    background-color: rgba(0,0,0,0.4); 
}

.modal-content {
    background-color: #fff;
    margin: 15% auto; 
    padding: 25px;
    border: 1px solid #888;
    width: 80%;
    max-width: 600px;
    border-radius: 10px;
    position: relative;
    box-shadow: 0 5px 15px rgba(0,0,0,0.3);
}

/* Garante quebra de linha em títulos longos do modal */
.modal-content h3 {
    word-wrap: break-word;
    overflow-wrap: break-word;
}

.close-btn {
    color: #aaa;
    float: right;
    font-size: 28px;
    font-weight: bold;
}

.close-btn:hover,
.close-btn:focus {
    color: #000;
    text-decoration: none;
    cursor: pointer;
}

.note {
    font-size: 0.9em;
    margin-top: 20px;
    padding: 10px;
    border-left: 5px solid #ffc107;
    background-color: #fffbe6;
}

/* Container de atividades (Flexbox para ordenação) */
#activities-list {
    margin-top: 15px;
    display: flex;
    flex-direction: column; 
    gap: 10px; 
}

.activity-item {
    border: 1px solid #ccc;
    padding: 10px;
    margin-bottom: 0; 
    border-left: 5px solid #ccc; /* Cor de fallback neutra/cinza */
}

/* Garante quebra de linha no conteúdo do card */
.activity-item h4, .activity-item p {
    word-wrap: break-word;
    overflow-wrap: break-word;
}

.activity-item h4 {
    margin-top: 0;
    color: #007bff;
}

/* ========================================================== */
/* --- 5. ORDENAÇÃO E CORES NO MODAL --- */
/* ========================================================== */

/* 5.1. CORES DA BORDA LATERAL (Periodicidade e Engemon) */

/* Cores de Borda por Periodicidade */
.activity-item.border-p-B2B-HUAWEI { border-left-color: #BFBFBF; }
.activity-item.border-p-FREEZING { border-left-color: #fec0fe; } 
.activity-item.border-p-MENSAL { border-left-color: #DA9694; }
.activity-item.border-p-BIMESTRAL { border-left-color: #E26B0A; }
.activity-item.border-p-TRIMESTRAL { border-left-color: #FFFF00; }
.activity-item.border-p-QUADRIMESTRAL { border-left-color: #95B3D7; }
.activity-item.border-p-SEMESTRAL { border-left-color: #00B050; }
.activity-item.border-p-ANUAL { border-left-color: #FF0000; }

/* Cores de Borda ENGEMON (Lógica especial do JS) */
.activity-item.border-engemon-incendio {
    border-left-color: #92D050; 
}
.activity-item.border-engemon-automacao {
    border-left-color: #E8950E; 
}

/* 5.2. ESTILO DAS TAGS (Periodicidade) */

.periodicidade-tag {
    font-size: 0.8em;
    padding: 3px 6px;
    border-radius: 4px;
    margin-left: 10px;
    font-weight: bold;
    color: #333;
    display: inline-block;
    border: 1px solid #333;
}

/* Cores de Fundo das Tags de Periodicidade */
.p-B2B-HUAWEI { background-color: #BFBFBF; border-color: #BFBFBF; }
.p-FREEZING { background-color: #fec0fe; border-color: #fec0fe; }
.p-MENSAL { background-color: #DA9694; border-color: #DA9694; }
.p-BIMESTRAL { background-color: #E26B0A; border-color: #E26B0A; }
.p-TRIMESTRAL { background-color: #FFFF00; border-color: #FFFF00; }
.p-QUADRIMESTRAL { background-color: #95B3D7; border-color: #95B3D7; }
.p-SEMESTRAL { background-color: #00B050; border-color: #00B050; }
.p-ANUAL { 
    background-color: #FF0000; 
    color: white; 
    border-color: #FF0000;
}

/* 5.3. CLASSES DE ORDENAÇÃO (Order: 0 é o mais importante/primeiro) */

.activity-item.order-gr-TBRA_FREEZING { order: 0; }
.activity-item.order-gr-B2B_HUAWEI_FREEZING { order: 1; }
.activity-item.order-gr-TBRA_NGIN,
.activity-item.order-gr-TBRA_RELEASE {
    order: 2;
    border-left-color: orange; 
}

.activity-item.order-gr-VENDORS { order: 3; }
.activity-item.order-gr-ENGEMON { order: 4; }
.activity-item.order-gr-FERIADO { order: 98; }
.activity-item.order-gr-DEFAULT { order: 99; } 


/* ========================================================== */
/* --- 6. RESPONSIVIDADE (MEDIA QUERIES) --- */
/* ========================================================== */

@media (max-width: 768px) {
    /* Ajustes Gerais para o Conteúdo Principal */
    main {
        margin: 10px;
        padding: 10px;
    }

    /* Ajuste no Cabeçalho do Calendário (Controles) */
    .calendar-controls {
        flex-direction: column;
        gap: 10px;
        padding: 10px;
    }
    
    .calendar-controls button {
        width: 100%;
    }

    /* Reduz o espaçamento e fonte para os dias da semana */
    .weekdays span {
        padding: 5px 2px;
        font-size: 0.75em;
    }

    /* Reduz a altura mínima dos dias e o número do dia */
    .day {
        min-height: 55px; 
        padding: 4px;
    }
    
    .day-number {
        font-size: 0.9em; 
    }

    /* Ajuste para o indicador de atividade */
    .activity-indicator {
        font-size: 0.6em;
        padding: 1px 2px;
        margin: 1px auto 0 auto; /* Ajuste a margem para telas menores */
    }

    /* MODAL - CORREÇÃO DE VAZAMENTO LATERAL */
    .modal-content {
        width: 85%; 
        margin: 5% auto; 
        max-width: none; 
        max-height: 90vh; 
        overflow-y: auto; 
        padding: 15px;
    }
    
    /* Garante a quebra de linha no título do modal */
    .modal-content h3 {
        font-size: 1.1em;
        word-wrap: break-word;
        overflow-wrap: break-word;
    }

    /* Ajuste de Fonte e Espaçamento nos itens do modal */
    .activity-item {
        padding: 8px;
    }
    
    .activity-item h4 {
        font-size: 0.85em;
        margin-bottom: 5px;
        word-wrap: break-word; 
    }

    .activity-item p {
        font-size: 0.75em;
    }

    /* Ajuste para as tags de periodicidade no modal */
    .periodicidade-tag {
        font-size: 0.65em;
        padding: 2px 3px;
    }
}